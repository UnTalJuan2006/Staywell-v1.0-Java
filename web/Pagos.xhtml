<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Pago de Reserva</title>
    <style>
        body {
            background-color: #f7f7f7;
            font-family: 'Segoe UI', sans-serif;
        }
        .card {
            max-width: 600px;
            margin: 3rem auto;
            padding: 2rem;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .label {
            font-weight: bold;
            color: #333;
        }
    </style>
</h:head>
<h:body>

    <!-- Growl global fuera del formulario -->
    <p:growl id="growl" showDetail="true" life="4000" />

    <!-- Formulario principal de pago -->
    <h:form id="formPago" class="card">
        <h2 style="text-align:center;">Confirmar Pago</h2>

        <h:panelGrid columns="2" columnClasses="label,value" cellpadding="6" style="width:100%;">

            <!-- Tipo de tarjeta -->
            <h:outputLabel value="Tipo de Tarjeta:" for="tipo" />
            <p:selectOneMenu id="tipo" value="#{pagoBean.pago.tipoTarjeta}" style="width:100%"
                             required="true" requiredMessage="Seleccione un tipo de tarjeta">
                <f:selectItem itemLabel="Seleccione..." itemValue="#{null}" noSelectionOption="true" />
                <f:selectItems value="#{pagoBean.tiposTarjeta}" var="t" itemLabel="#{t}" itemValue="#{t}" />
                <p:ajax update="cuotasPanel" />
            </p:selectOneMenu>

            <!-- Número de tarjeta -->
            <h:outputLabel value="Número de Tarjeta:" for="num" />
            <p:inputText id="num" value="#{pagoBean.pago.numeroTarjeta}" maxlength="16"
                         required="true" label="Número de Tarjeta"/>

            <!-- Titular -->
            <h:outputLabel value="Titular:" for="titular" />
            <p:inputText id="titular" value="#{pagoBean.pago.titular}" required="true" />

        

            <!-- Código de seguridad -->
            <h:outputLabel value="Código de Seguridad:" for="cvv" />
            <p:password id="cvv" value="#{pagoBean.pago.codigoSeguridad}" maxlength="3" required="true" />

            <!-- Monto -->
       
        </h:panelGrid>

        <!-- Panel dinámico para cuotas -->
        <p:outputPanel id="cuotasPanel" style="margin-top:1rem;">
            <h:panelGrid columns="2" columnClasses="label,value" rendered="#{pagoBean.creditoSeleccionado}">
                <h:outputLabel value="Número de Cuotas:" for="cuotas" />
                <p:inputText id="cuotas" value="#{pagoBean.cuotas}" maxlength="2"
                             placeholder="Ej: 12" />
            </h:panelGrid>
        </p:outputPanel>

        <!-- Botones -->
        <div style="margin-top:2rem; text-align:center;">
            <p:commandButton value="Confirmar Pago"
                             actionListener="#{pagoBean.registrarPago}"
                             update="@form :growl"
                             icon="pi pi-check"
                             styleClass="p-button-success" />
            <p:commandButton value="Cancelar" type="reset"
                             icon="pi pi-times"
                             styleClass="p-button-secondary" />
        </div>

    </h:form>
</h:body>
</html>